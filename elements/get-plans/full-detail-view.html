<link rel="import" href="../../components/paper-shadow/paper-shadow.html">
<link rel="import" href="../../components/paper-button/paper-button.html">

<polymer-element name="full-detail-view" attributes="data refresh" >
  <template>
    <style>
        #wrapper{
          height: 100%;
          overflow:hidden;
        }
        #paper {
/*            position:absolute; top: 60px; left:0px; right:0px; bottom:0px;*/
            width: 100%;
            height: 100%;
/*            border: 1px solid #eee;*/
            overflow-x:auto;
        }
        paper-shadow{
            padding: 10px;
            margin: 10px;
        }
        /*.block-pointer-events {
            pointer-events: none
        }*/
        .link-tools .tool-remove { display: none }
        paper-button{
          margin: 0px;
          padding: 0px;
        }
      
    </style>
    </style>
    <link rel="stylesheet" href="../../css/main.css" shim-shadowdom>
    <link rel="stylesheet" href="../../external_components/joint.css" shim-shadowdom>
<!--
    <section>
      <paper-shadow>
        <div horizontal center-justified layout>
          <div vertical layout >
            <h3 style="margin: 5px; padding: 0px;">Do you like this plan? ( {{display_solution_id}} / {{solutions_length}} ) </h3>
            <p><paper-button raised on-tap="{{getNextSolution}}">No</paper-button> <paper-button raised class="colored">Yes</paper-button></p>
                <p><paper-button raised on-tap="{{getPreviousSolution}}"><< Previous </paper-button> <paper-button raised class="colored" on-tap="{{getNextSolution}}">Next >></paper-button></p>
          </div>
        </div>
      </paper-shadow>
    </section>
-->
    <paper-shadow>
      <div id="paper"></div>
    </paper-shadow>
      
    
  </template>
  <script src="../../external_components/joint.min.js"></script>
  <script src="full-detail-view.js"></script>
  <script>
    
    Polymer({
      created: function(){
        this.solution_id = 0;
        this.display_solution_id = 1;
        this.solutions_length = 1;
      },
      domReady: function(){
        this.graph = new joint.dia.Graph;
        this.paper = new joint.dia.Paper({
            el: this.$.paper,
            width: 2545,
            height: 800,
            gridSize: 1,
            perpendicularLinks: true,
            model: this.graph,
            linkView: joint.dia.LinkView.extend({
            pointerdblclick: function(evt, x, y) {
                if (V(evt.target).hasClass('connection') || V(evt.target).hasClass('connection-wrap')) {
                this.addVertex({ x: x, y: y });
                }
            }
            }),
            interactive: function(cellView) {
            if (cellView.model instanceof joint.dia.Link) {
                    // Disable the default vertex add functionality on pointerdown.
                // return { vertexAdd: false };
            }
            return true;
            }

        });
        this.paper.scale(0.7, 0.7);
        
      },
      dataChanged: function(){
//        this.solution_id = 0;
//        this.display_solution_id = 1;
//        this.solutions_length = this.data.length;
        this.getSolution();
      },
      refreshChanged: function(){
        this.getSolution();
      },
      getSolution: function(){
        if(this.graph != null)
          this.graph.clear();    
        // this.graph.fromJSON(this.data[0]);
//        var tmp_data = this.data[this.solution_id];
//        exportJointJS = new ExportJointJS(this.data);
//        this.graph.addCells(exportJointJS.getCells());
        //          if (this.solution_id + 1 <= this.data.length)
      },
//      getNextSolution: function(){
//        if(this.solution_id < this.data.length){
//          this.solution_id ++;
//          this.display_solution_id = this.solution_id + 1;
//          console.log(this.solution_id);
//          this.getSolution();
//        }
//      },
//      getPreviousSolution: function(){
//        if(this.solution_id > 0){
//          this.solution_id --;
//          this.display_solution_id = this.solution_id + 1;
//          console.log(this.solution_id);
//          this.getSolution();
//        }
//      }
      

    });
  </script>
  
</polymer-element>


